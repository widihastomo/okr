<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Transisi Onboarding</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: linear-gradient(to right, #ea580c, #f97316);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
        }
        .status {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: bold;
        }
        .success {
            background: #dcfce7;
            color: #16a34a;
            border: 1px solid #bbf7d0;
        }
        .info {
            background: #dbeafe;
            color: #2563eb;
            border: 1px solid #bfdbfe;
        }
        .warning {
            background: #fef3c7;
            color: #d97706;
            border: 1px solid #fde68a;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Sistem Transisi Onboarding</h1>
        <p>Test ini akan memverifikasi apakah sistem transisi dari onboarding ke guided highlights bekerja dengan baik.</p>
        
        <div class="status info">
            <strong>Status:</strong> Siap untuk testing
        </div>
        
        <h2>Langkah Testing:</h2>
        <ol>
            <li><strong>Reset Onboarding:</strong> Hapus data onboarding untuk memulai fresh</li>
            <li><strong>Mulai Onboarding:</strong> Jalankan proses onboarding baru</li>
            <li><strong>Selesaikan Onboarding:</strong> Complete semua langkah onboarding</li>
            <li><strong>Verifikasi Transisi:</strong> Pastikan guided highlights muncul otomatis</li>
        </ol>
        
        <div style="margin-top: 30px;">
            <button class="test-button" onclick="resetOnboarding()">
                üîÑ Reset Onboarding
            </button>
            <button class="test-button" onclick="startOnboarding()">
                üöÄ Mulai Onboarding
            </button>
            <button class="test-button" onclick="simulateComplete()">
                ‚úÖ Simulasi Complete
            </button>
        </div>
        
        <div id="test-results" style="margin-top: 20px;"></div>
    </div>

    <script>
        function resetOnboarding() {
            // Reset localStorage
            localStorage.removeItem('onboardingCompleted');
            localStorage.removeItem('guidedHighlightsState');
            localStorage.removeItem('transitionState');
            
            showResult('‚úÖ Onboarding data berhasil direset!', 'success');
            
            // Reload halaman untuk reset state
            setTimeout(() => {
                window.location.href = '/';
            }, 1500);
        }
        
        function startOnboarding() {
            showResult('üöÄ Mengarahkan ke halaman onboarding...', 'info');
            setTimeout(() => {
                window.location.href = '/onboarding';
            }, 1000);
        }
        
        function simulateComplete() {
            // Simulasi onboarding selesai
            localStorage.setItem('onboardingCompleted', 'true');
            
            // Set guided highlights untuk aktif
            const guidedState = {
                isActive: true,
                isCompleted: false,
                currentStep: 0,
                hasStarted: true
            };
            localStorage.setItem('guidedHighlightsState', JSON.stringify(guidedState));
            
            showResult('‚úÖ Simulasi onboarding selesai! Mengarahkan ke dashboard...', 'success');
            
            setTimeout(() => {
                window.location.href = '/';
            }, 2000);
        }
        
        function showResult(message, type) {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        // Check current state
        window.onload = function() {
            const onboardingCompleted = localStorage.getItem('onboardingCompleted');
            const guidedState = localStorage.getItem('guidedHighlightsState');
            
            let statusMessage = '';
            if (onboardingCompleted === 'true') {
                statusMessage = '‚úÖ Onboarding telah selesai';
            } else {
                statusMessage = '‚è≥ Onboarding belum selesai';
            }
            
            if (guidedState) {
                const state = JSON.parse(guidedState);
                statusMessage += ` | Guided Highlights: ${state.isActive ? 'Aktif' : 'Tidak aktif'}`;
            }
            
            showResult(statusMessage, 'info');
        };
    </script>
</body>
</html>